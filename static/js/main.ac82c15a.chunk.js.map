{"version":3,"sources":["data/ScriptConstants.js","data/simulate.js","views/components/BustabitScriptConfig.js","views/components/LineChart.js","views/components/BustabitScript.js","views/components/Options.js","views/components/Disclaimer.js","views/components/Donate.js","views/AppView.js","data/ScriptActionTypes.js","data/ScriptDispatcher.js","data/ScriptStore.js","data/ScriptListStore.js","data/ScriptActions.js","containers/AppContainer.js","serviceWorker.js","index.js","data/ScriptUtils.js"],"names":["NEW_SCRIPT","id","name","text","config","undefined","SCRIPT_SAMPLES","hashToBust","seed","CryptoJS","HmacSHA256","enc","Hex","parse","toString","slice","nBits","X","parseInt","Math","pow","result","floor","max","hashToBusts","amount","isNaN","TypeError","prevHash","unshift","hash","bust","String","index","SHA256","SimulatedBustabitHistory","constructor","this","data","length","first","size","last","toArray","SimulatedBustabitEngine","EventEmitter","super","_userInfo","uname","balance","balanceATH","balanceATL","winStreak","loseStreak","streakSum","sumWagers","highBet","lowBet","bets","profit","profitATH","profitATL","profitPerHour","duration","history","bet","bind","getCurrentBet","next","wager","payout","isBetQueued","cancelQueuedBet","Promise","resolve","reject","round","isAuto","catch","error","console","evalScript","engine","userInfo","log","stop","gameResultFromHash","eval","arguments","simulate","startingBalance","gameHash","gameAmount","drawChart","quickTest","logMessages","shouldStop","shouldStopReason","logFuncs","warn","info","debug","noLog","msg","Array","prototype","call","join","on","e","endSimulation","results","message","Object","assign","chartData","context","reason","games","nextGame","setImmediate","game","isSimulation","cashedAt","gameState","emit","gameId","sinceWin","sinceLose","doGame","BustabitScriptConfig","Component","props","handleConfigFieldChange","key","value","path","split","obj","i","onChange","render","className","rest","keys","map","element","component","FieldTypes","type","freeze","label","optional","htmlFor","parseFloat","required","step","eventInfo","target","checked","options","optionFieldChange","style","width","padding","option","LineChart","state","tooltipData","handleTooltipChange","shouldUpdateLineChart","updateLineChart","componentDidMount","container","ReactDOM","findDOMNode","componentDidUpdate","prevProps","prevState","viewBoxWidth","viewBoxHeight","xAccessor","yAccessor","crosshairEnabled","crosshairClassName","preserveAspectRatio","visibility","setState","some","propName","prev","current","isArray","onTooltipChange","svgElement","d3","select","tooltipElement","attr","margin","top","right","bottom","left","margin2","height","height2","selectAll","remove","xScale","range","xScale2","yScale","yScale2","xAxis","xAxis2","yAxis","tickFormat","n","selected","lineX","d","lineY","line","x","y","line2","brush","extent","sourceEvent","s","selection","domain","invert","g_lines","moveCrosshair","g_axes","zoom","transform","scale","translate","scaleExtent","Infinity","translateExtent","t","rescaleX","move","invertX","append","crosshairElement","overlay","xdomain","ydomain","transition","ease","datum","enter","mousex","dx","bisect","d0","d1","abs","classed","tooltipX","tooltipY","svgMouse","node","containerMouse","tooltipOffset","tooltipSize","getBoundingClientRect","moveTooltip","withData","d3LineChart","Tooltip","wrapper","readOnly","App","viewState","scripts","editing","creating","deleting","load","script","updateError","onCancel","onSave","New","createError","Title","List","deletingId","colSpan","onClick","onNew","items","entrySeq","maxWidth","onDeleted","onSelect","onEdit","onDelete","Show","resultsElement","document","getElementById","window","scrollY","scrollTo","behavior","isLoading","onDeselect","icon","min","event","changes","disabled","args","onRun","Boolean","resize","placeholder","seconds","minutes","hours","days","msToTime","toFixed","Delete","EditButton","SelectButton","DeleteButton","NewButton","GoBackButton","BackToTopButton","scroll","Edit","close","preventDefault","onSubmit","trim","defaultValue","rows","Control","children","OptionsButton","isOpen","onClose","OptionsModal","DisclaimerButton","DisclaimerModal","DonateButton","DonateModal","href","rel","AppView","ActionTypes","LOADED","NEW","CREATE_ERROR","CREATED","EDIT","UPDATE_ERROR","UPDATED","CANCEL","DELETE","DELETE_ERROR","DELETED","SIMULATE","SIMULATED","Dispatcher","ScriptStore","ReduceStore","ScriptDispatcher","getInitialState","Immutable","OrderedMap","reduce","action","ScriptActionTypes","clear","merge","delete","set","ScriptListStore","editingId","selectedId","isSimulating","ScriptConstants","SELECT","DESELECT","Actions","ScriptUtils","dispatch","restoreSamples","deleted","save","new","edit","cancel","deselect","run","settings","then","Container","createFunctional","getState","list","get","deleteError","ScriptActions","location","hostname","match","AppContainer","navigator","serviceWorker","ready","registration","unregister","getLocalStorageScripts","loadedScripts","JSON","localStorage","getItem","setLocalStorageScripts","removeItem","setItem","stringify","onBeforeSave","oldConfig","getConfigFromScriptText","assignConfigValues","values","splitConfigFromScriptText","regexp","exec","getScriptTextWithoutConfig","getUniqueID","existingIds","attempt","lib","WordArray","random","indexOf","forEach","isSample","callback","setTimeout"],"mappings":"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","file":"static/js/main.ac82c15a.chunk.js","sourcesContent":["const SCRIPT_SAMPLES = [\r\n  {\r\n    name: 'Flat Bet',\r\n    text: `var config = {\r\n  wager: {\r\n    value: 1000, type: 'balance', label: 'wager'\r\n  },\r\n  payout: {\r\n    value: 2, type: 'multiplier', label: 'payout' }\r\n};\r\n\r\n// Try to bet immediately when script starts\r\nmakeBet();\r\n\r\nengine.on('GAME_STARTING', onGameStarted);\r\nengine.on('GAME_ENDED', onGameEnded);\r\n\r\nfunction onGameStarted() {\r\n  makeBet();\r\n}\r\n\r\nfunction onGameEnded() {\r\n  var lastGame = engine.history.first();\r\n\r\n  // If we wagered, it means we played\r\n  if (!lastGame.wager) {\r\n    return;\r\n  }\r\n\r\n  if (lastGame.cashedAt) {\r\n    var profit = Math.round((config.wager.value * config.payout.value - config.wager.value) / 100)\r\n    log('we won', profit, 'bits');\r\n  } else {\r\n    log('we lost', Math.round(config.wager.value / 100), 'bits');\r\n  }\r\n}\r\n\r\nfunction makeBet() {\r\n  engine.bet(config.wager.value, config.payout.value);\r\n  log('betting', Math.round(config.wager.value / 100), 'on', config.payout.value, 'x');\r\n}`\r\n  },\r\n  {\r\n    name: 'Martingale',\r\n    text: `var config = {\r\n  baseBet: { value: 100, type: 'balance', label: 'base bet' },\r\n  payout: { value: 2, type: 'multiplier' },\r\n  stop: { value: 1e8, type: 'balance', label: 'stop if bet >' },\r\n  loss: {\r\n    value: 'increase', type: 'radio', label: 'On Loss',\r\n    options: {\r\n      base: { type: 'noop', label: 'Return to base bet' },\r\n      increase: { value: 2, type: 'multiplier', label: 'Increase bet by' },\r\n    }\r\n  },\r\n  win: {\r\n    value: 'base', type: 'radio', label: 'On Win',\r\n    options: {\r\n      base: { type: 'noop', label: 'Return to base bet' },\r\n      increase: { value: 2, type: 'multiplier', label: 'Increase bet by' },\r\n    }\r\n  }\r\n};\r\n\r\n\r\nlog('Script is running..');\r\n\r\nvar currentBet = config.baseBet.value;\r\n\r\n// Always try to bet when script is started\r\nengine.bet(roundBit(currentBet), config.payout.value);\r\n\r\nengine.on('GAME_STARTING', onGameStarted);\r\nengine.on('GAME_ENDED', onGameEnded);\r\n\r\nfunction onGameStarted() {\r\n  engine.bet(roundBit(currentBet), config.payout.value);\r\n}\r\n\r\nfunction onGameEnded() {\r\n  var lastGame = engine.history.first()\r\n\r\n  // If we wagered, it means we played\r\n  if (!lastGame.wager) {\r\n    return;\r\n  }\r\n\r\n  // we won..\r\n  if (lastGame.cashedAt) {\r\n    if (config.win.value === 'base') {\r\n      currentBet = config.baseBet.value;\r\n    } else {\r\n      console.assert(config.win.value === 'increase');\r\n      currentBet *= config.win.options.increase.value;\r\n    }\r\n    log('We won, so next bet will be', currentBet/100, 'bits')\r\n  } else {\r\n    // damn, looks like we lost :(\r\n    if (config.loss.value === 'base') {\r\n      currentBet = config.baseBet.value;\r\n    } else {\r\n      console.assert(config.loss.value === 'increase');\r\n      currentBet *= config.loss.options.increase.value;\r\n    }\r\n    log('We lost, so next bet will be', currentBet/100, 'bits')\r\n  }\r\n\r\n  if (currentBet > config.stop.value) {\r\n    log('Was about to bet', currentBet, 'which triggers the stop');\r\n    engine.removeListener('GAME_STARTING', onGameStarted);\r\n    engine.removeListener('GAME_ENDED', onGameEnded);\r\n  }\r\n}\r\n\r\nfunction roundBit(bet) {\r\n  return Math.round(bet / 100) * 100;\r\n}`\r\n  },\r\n  {\r\n    name: 'Payout Martingale',\r\n    text: `var config = {\r\n  bet: {\r\n    value: 100,\r\n    type: 'balance'\r\n  },\r\n  basePayout: {\r\n    value: 1.2,\r\n    type: 'multiplier',\r\n    label: 'base payout'\r\n  },\r\n  stop: {\r\n    value: 20,\r\n    type: 'multiplier',\r\n    label: 'stop if payout >'\r\n  },\r\n  loss: {\r\n    value: 'increase',\r\n    type: 'radio',\r\n    label: 'On Loss',\r\n    options: {\r\n      base: {\r\n        type: 'noop',\r\n        label: 'Return to base payout'\r\n      },\r\n      increase: {\r\n        value: 0.1,\r\n        type: 'multiplier',\r\n        label: 'Increase payout by +'\r\n      },\r\n    }\r\n  },\r\n  win: {\r\n    value: 'base',\r\n    type: 'radio',\r\n    label: 'On Win',\r\n    options: {\r\n      base: {\r\n        type: 'noop',\r\n        label: 'Return to base payout'\r\n      },\r\n      increase: {\r\n        value: 1,\r\n        type: 'multiplier',\r\n        label: 'Increase payout by +'\r\n      },\r\n    }\r\n  }\r\n};\r\n\r\n\r\nlog('Script is running..');\r\n\r\nvar currentPayout = config.basePayout.value;\r\n\r\n// Always try to bet when script is started\r\nengine.bet(config.bet.value, currentPayout);\r\n\r\nengine.on('GAME_STARTING', onGameStarted);\r\nengine.on('GAME_ENDED', onGameEnded);\r\n\r\nfunction onGameStarted() {\r\n  log('betting', Math.round(config.bet.value / 100), 'at payout of', currentPayout, 'x')\r\n  engine.bet(config.bet.value, currentPayout);\r\n}\r\n\r\nfunction onGameEnded(info) {\r\n  var lastGame = engine.history.first()\r\n\r\n  // If we wagered, it means we played\r\n  if (!lastGame.wager) {\r\n    return;\r\n  }\r\n\r\n  // we won..\r\n  if (lastGame.cashedAt) {\r\n    if (config.win.value === 'base') {\r\n      currentPayout = config.basePayout.value;\r\n      log('won, so resetting payout to', currentPayout)\r\n    } else {\r\n      console.assert(config.win.value === 'increase');\r\n      currentPayout += config.win.options.increase.value;\r\n      log('won, so increasing payout to', currentPayout)\r\n    }\r\n  } else {\r\n    // damn, looks like we lost :(\r\n    if (config.loss.value === 'base') {\r\n      currentPayout = config.basePayout.value;\r\n      log('lost, so resetting payout to', currentPayout)\r\n    } else {\r\n      console.assert(config.loss.value === 'increase');\r\n      currentPayout += config.loss.options.increase.value;\r\n      log('lost, so increasing payout', currentPayout)\r\n    }\r\n  }\r\n\r\n  if (currentPayout > config.stop.value) {\r\n    log('Was about to bet with payout', currentPayout, 'which triggers the stop');\r\n    engine.removeListener('GAME_STARTING', onGameStarted);\r\n    engine.removeListener('GAME_ENDED', onGameEnded);\r\n  }\r\n}`\r\n  },\r\n\r\n];\r\n\r\nconst NEW_SCRIPT = {\r\n  id: '',\r\n  name: 'Untitled Script',\r\n  text: `var config = {\r\n\r\n};\r\n\r\nlog('Simulation begins here...')`,\r\n  config: undefined\r\n}\r\n\r\nexport default {\r\n  SCRIPT_SAMPLES,\r\n  NEW_SCRIPT,\r\n}\r\n","import EventEmitter from 'events'\r\nimport CryptoJS from \"crypto-js\"\r\n\r\nfunction hashToBust(seed) {\r\n  const nBits = 52;\r\n  const hmac = CryptoJS.HmacSHA256(CryptoJS.enc.Hex.parse(seed), '0000000000000000004d6ec16dafe9d8370958664c1dc422f452892264c59526');\r\n  seed = hmac.toString(CryptoJS.enc.Hex);\r\n  seed = seed.slice(0, nBits / 4);\r\n  const r = parseInt(seed, 16);\r\n  let X = r / Math.pow(2, nBits);\r\n  X = 99 / (1 - X);\r\n  const result = Math.floor(X);\r\n  return Math.max(1, result / 100);\r\n}\r\n\r\nfunction hashToBusts(seed, amount) {\r\n  if (isNaN(amount) || amount <= 0) {\r\n    throw new TypeError('amount must be a number larger than zero.')\r\n  }\r\n  let prevHash = seed\r\n  const result = []\r\n  result.unshift({ hash: prevHash, bust: hashToBust(String(prevHash)) })\r\n  for (let index = 0; index < amount; index++) {\r\n    let hash = String(CryptoJS.SHA256(String(prevHash)))\r\n    let bust = hashToBust(hash)\r\n    result.unshift({ hash, bust })\r\n    prevHash = hash;\r\n  }\r\n  return result\r\n}\r\n\r\nclass SimulatedBustabitHistory {\r\n  constructor() {\r\n    this.data = []\r\n  }\r\n\r\n  get size() {\r\n    return this.data.length\r\n  }\r\n\r\n  get length() {\r\n    return this.data.length\r\n  }\r\n\r\n  get start() {\r\n    return 0\r\n  }\r\n\r\n  get end() {\r\n    return this.data.length - 1\r\n  }\r\n\r\n  first() {\r\n    return this.size > 0 ? this.data[0] : null;\r\n  }\r\n\r\n  last() {\r\n    return this.size > 0 ? this.data[this.size - 1] : null;\r\n  }\r\n\r\n  toArray() {\r\n    return this.data;\r\n  }\r\n}\r\n\r\nclass SimulatedBustabitEngine extends EventEmitter {\r\n\r\n  constructor() {\r\n    super()\r\n    this._userInfo = {\r\n      uname: 'Anonymous',\r\n      balance: 0,\r\n      balanceATH: 0,\r\n      balanceATL: 0,\r\n      winStreak: 0,\r\n      loseStreak: 0,\r\n      streakSum: 0,\r\n      sumWagers: 0,\r\n      highBet: 0,\r\n      lowBet: 0,\r\n      bets: 0,\r\n      profit: 0,\r\n      profitATH: 0,\r\n      profitATL: 0,\r\n      profitPerHour: 0,\r\n      duration: 0\r\n    }\r\n    this.history = new SimulatedBustabitHistory()\r\n    this.bet = this.bet.bind(this)\r\n  }\r\n\r\n  getCurrentBet() {\r\n    if (!this.next) return undefined;\r\n    return { wager: this.next.wager, payout: this.next.payout }\r\n  }\r\n\r\n  isBetQueued() {\r\n    return !!this.next\r\n  }\r\n\r\n  cancelQueuedBet() {\r\n    this.next = undefined\r\n  }\r\n\r\n  bet(wager, payout) {\r\n    // 'bet' returns a Promise, just like on bustabit\r\n    return new Promise((resolve, reject) => {\r\n      this.next = { wager, payout: Math.round(payout * 100) / 100, isAuto: true, resolve, reject }\r\n    }).catch(error => console.error(error));\r\n  }\r\n\r\n}\r\n\r\nfunction evalScript() {\r\n  const { config, engine, userInfo, log, stop, gameResultFromHash } = this // eslint-disable-line no-unused-vars\r\n  // eslint-disable-next-line\r\n  eval(arguments[0])\r\n}\r\n\r\nfunction simulate({ text, config, startingBalance, gameHash, gameAmount, drawChart, quickTest }) {\r\n  return new Promise((resolve, reject) => {\r\n    let logMessages = '',\r\n      shouldStop = false,\r\n      shouldStopReason = undefined;\r\n    const logFuncs = {\r\n      log: console.log,\r\n      warn: console.warn,\r\n      info: console.info,\r\n      error: console.error,\r\n      debug: console.debug\r\n    };\r\n    function noLog() { return; }\r\n    if (!quickTest) {\r\n      console.log = noLog;\r\n      console.warn = noLog;\r\n      console.info = noLog;\r\n      console.error = noLog;\r\n      console.debug = noLog;\r\n    }\r\n    const engine = new SimulatedBustabitEngine(),\r\n      userInfo = engine._userInfo,\r\n      log = (!quickTest ? () => { } : function () {\r\n        let msg = Array.prototype.slice.call(arguments);\r\n        logMessages += msg.join(' ') + '\\n'\r\n        msg.unshift('LOG:');\r\n        console.log(...msg);\r\n      }),\r\n      stop = function (reason) {\r\n        shouldStopReason = reason\r\n        shouldStop = true\r\n      },\r\n      gameResultFromHash = function (hash) {\r\n        return new Promise(resolve => resolve(hashToBust(hash)));\r\n      };\r\n\r\n    engine.on('error', (e) => {\r\n      log(`Error: ${e}`);\r\n      endSimulation();\r\n    });\r\n\r\n    log('Script starting');\r\n\r\n    userInfo.balance = startingBalance\r\n    userInfo.balanceATH = startingBalance\r\n    userInfo.balanceATL = startingBalance\r\n\r\n    const results = {\r\n      duration: 0,\r\n      startingBalance: startingBalance,\r\n      balance: startingBalance,\r\n      balanceATH: startingBalance,\r\n      balanceATL: startingBalance,\r\n      bets: 0,\r\n      profit: 0,\r\n      lowBet: 0,\r\n      highBet: 0,\r\n      winStreak: 0,\r\n      loseStreak: 0,\r\n      streakSum: 0,\r\n      profitPerHour: 0,\r\n      profitATH: 0,\r\n      profitATL: 0,\r\n      message: '',\r\n      history: engine.history.data,\r\n      log: logMessages\r\n    };\r\n    if (drawChart) {\r\n      Object.assign(results, { chartData: [] })\r\n    }\r\n\r\n    const context = { config, engine, userInfo, log, stop, gameResultFromHash };\r\n    evalScript.call(context, text)\r\n\r\n    const games = hashToBusts(gameHash, gameAmount)\r\n    nextGame(null, -1, games)\r\n\r\n    function nextGame(id) {\r\n      id++\r\n      setImmediate(() => {\r\n        if (id < games.length && !shouldStop) {\r\n          doGame(id);\r\n        } else {\r\n          endSimulation();\r\n        }\r\n      });\r\n    }\r\n\r\n\r\n    function endSimulation() {\r\n      if (!!quickTest) {\r\n        console.log = logFuncs.log;\r\n        console.warn = logFuncs.warn;\r\n        console.info = logFuncs.info;\r\n        console.error = logFuncs.error;\r\n        console.debug = logFuncs.debug;\r\n      }\r\n      if (shouldStop && shouldStopReason) {\r\n        log(shouldStopReason)\r\n      }\r\n\r\n      if (userInfo.streakSum < userInfo.sumWagers) {\r\n        userInfo.streakSum = userInfo.sumWagers\r\n      }\r\n\r\n      results.duration = userInfo.duration;\r\n      results.startingBalance = startingBalance\r\n      results.balance = userInfo.balance\r\n      results.bets = userInfo.bets\r\n      results.profit = userInfo.profit\r\n      results.lowBet = userInfo.lowBet\r\n      results.highBet = userInfo.highBet\r\n      results.streakSum = userInfo.streakSum\r\n      results.loseStreak = userInfo.loseStreak\r\n      results.winStreak = userInfo.winStreak\r\n      results.profitATH = userInfo.profitATH\r\n      results.profitATL = userInfo.profitATL\r\n      results.balanceATH = userInfo.balanceATH\r\n      results.balanceATL = userInfo.balanceATL\r\n      results.profitPerHour = results.profit / (results.duration / (1000 * 60 * 60))\r\n      results.message = `${userInfo.bets} Games played. ${results.profit > 0 ? 'Won' : 'Lost'} ${(results.profit / 100)} bits. ${results.message || ''}`\r\n      results.history = engine.history.results\r\n      results.log = logMessages\r\n      resolve(results);\r\n    }\r\n\r\n    function doGame(id) {\r\n      const game = games[id]\r\n      game.id = id\r\n      game.isSimulation = true\r\n      game.wager = 0\r\n      game.cashedAt = 0\r\n\r\n      // set gameState, just like bustabit\r\n      engine.gameState = 'GAME_STARTING'\r\n      // emit event, just like bustabit\r\n      engine.emit('GAME_STARTING', { gameId: id })\r\n\r\n      // engine.next is set when engine.bet(wager, payout) is called\r\n      // probably just like bustabit\r\n      const bet = engine.next\r\n      engine.next = null\r\n\r\n      if (bet) {\r\n        // reject with specific strings, just like bustabit\r\n        if (isNaN(bet.wager) || bet.wager < 100 || (bet.wager % 100 !== 0)) {\r\n          bet.reject('INVALID_BET')\r\n          return endSimulation()\r\n        }\r\n        if (isNaN(bet.payout)) {\r\n          bet.reject('cannot parse JSON')\r\n          return endSimulation()\r\n        }\r\n        if (userInfo.balance - bet.wager < 0) {\r\n          bet.reject('BET_TOO_BIG')\r\n          userInfo.sumWagers += bet.wager;\r\n          return endSimulation()\r\n        }\r\n        if (bet.payout <= 1) {\r\n          bet.reject('payout is too low')\r\n          return endSimulation()\r\n        }\r\n\r\n        // decrease balance, just like bustabit\r\n\r\n        if (bet.wager > 0) {\r\n          userInfo.balance -= bet.wager;\r\n          userInfo.bets++;\r\n          userInfo.sumWagers += bet.wager;\r\n        }\r\n        // resolve with null, just like bustabit\r\n        bet.resolve(null);\r\n\r\n        // emit event, just like bustabit\r\n        engine.emit('BET_PLACED', {\r\n          uname: userInfo.uname,\r\n          wager: bet.wager,\r\n          payout: bet.payout\r\n        })\r\n      }\r\n\r\n      engine.emit('GAME_STARTED', null)\r\n\r\n      // set gameState, just like bustabit\r\n      engine.gameState = 'GAME_IN_PROGRESS'\r\n\r\n      // set wager and cashedAt, just like bustabit\r\n      // wager: zero when didn't bet\r\n      game.wager = bet ? bet.wager : 0\r\n      // cashedAt: zero when busted or didn't bet\r\n      game.cashedAt = bet && bet.wager > 0 && bet.payout <= game.bust ? bet.payout : 0\r\n\r\n      if (game.wager !== 0) {\r\n        // update balance, just like bustabit\r\n        userInfo.balance += game.cashedAt * game.wager\r\n        if (userInfo.balance < userInfo.balanceATL) { userInfo.balanceATL = userInfo.balance }\r\n        if (userInfo.balance > userInfo.balanceATH) { userInfo.balanceATH = userInfo.balance }\r\n        userInfo.profit = userInfo.balance - startingBalance\r\n        if (!userInfo.lowBet || game.wager < userInfo.lowBet) { userInfo.lowBet = game.wager }\r\n        if (!userInfo.highBet || game.wager > userInfo.highBet) { userInfo.highBet = game.wager }\r\n        if (userInfo.profit < userInfo.profitATL) { userInfo.profitATL = userInfo.profit }\r\n        if (userInfo.profit > userInfo.profitATH) { userInfo.profitATH = userInfo.profit }\r\n      }\r\n\r\n      if (game.cashedAt > 0) {\r\n        // won!\r\n        userInfo.sinceWin = 0\r\n        userInfo.sinceLose++\r\n        if (userInfo.sinceLose > userInfo.winStreak) {\r\n          userInfo.winStreak = userInfo.sinceLose\r\n        }\r\n        if (userInfo.streakSum < userInfo.sumWagers) {\r\n          userInfo.streakSum = userInfo.sumWagers\r\n        }\r\n        userInfo.sumWagers = 0;\r\n        // emit event, just like bustabit\r\n        engine.emit('CASHED_OUT', {\r\n          uname: userInfo.uname,\r\n          cashedAt: game.cashedAt,\r\n          wager: game.wager\r\n        })\r\n      } else {\r\n        if (game.wager !== 0) {\r\n          // lost\r\n          userInfo.sinceLose = 0\r\n          userInfo.sinceWin++\r\n          if (userInfo.sinceWin > userInfo.loseStreak) {\r\n            userInfo.loseStreak = userInfo.sinceWin\r\n          }\r\n        }\r\n      }\r\n\r\n      // add game to history, just like bustabit\r\n      engine.history.data.unshift(game)\r\n      // keep track of some extra data for the chart\r\n      if (drawChart) {\r\n        results.chartData.unshift(Object.assign({\r\n          payout: (bet ? bet.payout : 0),\r\n          balance: userInfo.balance,\r\n          profit: (game.cashedAt > 0 ? (game.cashedAt - 1) * game.wager : -game.wager)\r\n        }, game))\r\n      }\r\n      userInfo.duration += Math.log(game.bust) / 0.00006\r\n\r\n      // set gameState, just like bustabit\r\n      engine.gameState = 'GAME_ENDED'\r\n      // emit event, just like bustabit\r\n      engine.emit('GAME_ENDED', { hash: game.hash, bust: game.bust })\r\n\r\n      nextGame(id)\r\n    }\r\n  });\r\n}\r\n\r\n\r\nexport default simulate\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass BustabitScriptConfig extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.handleConfigFieldChange = this.handleConfigFieldChange.bind(this)\r\n  }\r\n\r\n  handleConfigFieldChange (key, value) {\r\n    let path = key.split('.')\r\n\r\n    let obj = this.props.config\r\n    for (let i = 0; i<path.length; i++) {\r\n      obj = obj[path[i]]\r\n    }\r\n    obj.value = value\r\n    this.props.onChange(this.props.config)\r\n  }\r\n\r\n  render () {\r\n    const { config, onChange, className = '', ...rest } = this.props\r\n    return (\r\n      <div {...rest} className={`BustabitScript Config ${className}`}>\r\n        {!config ? null : Object.keys(config).map((key) => {\r\n          let element = config[key]\r\n          let component = FieldTypes[element.type]\r\n          return component({\r\n            ...element,\r\n            name: key,\r\n            onChange: this.handleConfigFieldChange\r\n          })\r\n        })}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nBustabitScriptConfig.propTypes = {\r\n  config: PropTypes.object,\r\n  onChange: PropTypes.func.isRequired,\r\n}\r\n\r\nconst FieldTypes = Object.freeze({\r\n  'balance': BalanceInput,\r\n  'checkbox': CheckboxInput,\r\n  'multiplier': MultiplierInput,\r\n  'noop': NoopInput,\r\n  'radio': RadioInput,\r\n  'text': TextInput,\r\n  'number': NumberInput,\r\n});\r\n\r\nfunction BalanceInput ({ name, label, value, optional, onChange }) {\r\n  let id = `config.${name}`\r\n  return (\r\n    <div className=\"field is-horizontal\" key={id}>\r\n      <div className=\"field-label is-normal\">\r\n        <label htmlFor={id} className=\"label\">{label || name}</label>\r\n      </div>\r\n      <div className=\"field-body\">\r\n        <div className=\"field\">\r\n          <div className=\"control has-icons-right\">\r\n            <input  type=\"number\"\r\n                    className=\"input is-normal\"\r\n                    id={id}\r\n                    name={name}\r\n                    value={parseFloat(value)/100}\r\n                    required={!optional}\r\n                    step=\"1\"\r\n                    onChange={function (eventInfo) {\r\n                      onChange(name, parseFloat(eventInfo.target.value) * 100)\r\n                    }}/>\r\n            <span className=\"icon is-small is-right\">\r\n              bits\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction CheckboxInput ({ name, label, value, onChange }) {\r\n  let id = `config.${name}`\r\n  return (\r\n    <div className=\"field is-horizontal\" key={id}>\r\n      <div className=\"field-label is-normal\">\r\n        <label htmlFor={id} className=\"label\">{label || name}</label>\r\n      </div>\r\n      <div className=\"field-body\">\r\n        <div className=\"field\">\r\n          <div className=\"control\">\r\n            <input  type=\"checkbox\"\r\n                    className=\"checkbox\"\r\n                    id={id}\r\n                    name={name}\r\n                    checked={!!value}\r\n                    onChange={function (eventInfo) {\r\n                      onChange(name, !!eventInfo.target.checked)\r\n                    }}/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction MultiplierInput ({ name, label, value, optional, onChange }) {\r\n  let id = `config.${name}`\r\n  return (\r\n    <div className=\"field is-horizontal\" key={id}>\r\n      <div className=\"field-label is-normal\">\r\n        <label htmlFor={id} className=\"label\">{label || name}</label>\r\n      </div>\r\n      <div className=\"field-body\">\r\n        <div className=\"field\">\r\n          <div className=\"control has-icons-right\">\r\n            <input  type=\"number\"\r\n                    className=\"input\"\r\n                    id={id}\r\n                    name={name}\r\n                    value={parseFloat(value)}\r\n                    required={!optional}\r\n                    step=\"0.01\"\r\n                    onChange={function (eventInfo) {\r\n                      onChange(name, parseFloat(eventInfo.target.value))\r\n                    }}/>\r\n            <span className=\"icon is-small is-right\">\r\n              <i className=\"fas fa-times\"></i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction NoopInput ({ name, label, value }) {\r\n  let id = `config.${name}`\r\n  return (\r\n    <div className=\"field\" key={id}>\r\n      <label  className=\"label\"\r\n              htmlFor={id}>\r\n        {label}\r\n      </label>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction RadioInput ({ name, label, value, options, onChange }) {\r\n  function optionFieldChange(name, value) {\r\n    onChange(name, value)\r\n  }\r\n  let id = `config.${name}`\r\n  return (\r\n    <div className=\"field\" key={id}>\r\n      <fieldset style={{width: \"100%\", padding: \"10px 10px\"}}>\r\n        <legend className=\"label has-text-centered is-uppercase\">\r\n          {label || name}\r\n        </legend>\r\n        {Object.keys(options || {}).map((key) => {\r\n          const option = options[key]\r\n          return (\r\n            <div key={`option-${key}`} className=\"field\">\r\n              <input  type=\"radio\"\r\n                      name={name}\r\n                      id={`config.${name}.options.${key}`}\r\n                      value={key/* TODO: shouldn't this be option.value ?*/}\r\n                      checked={value === key}\r\n                      onChange={function (eventInfo) {\r\n                        onChange(name, eventInfo.target.value)/* TODO: shouldn't this be option.value ?*/\r\n                      }}/>\r\n              &nbsp;\r\n              <div className=\"is-inline-block\">\r\n                {FieldTypes[option.type]({\r\n                  ...option,\r\n                  onChange: optionFieldChange,\r\n                  name: `${name}.options.${key}`\r\n                })}\r\n              </div>\r\n            </div>\r\n          )\r\n        })}\r\n      </fieldset>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction TextInput ({ name, label, value, optional, onChange }) {\r\n  let id = `config.${name}`\r\n  return (\r\n    <div className=\"field is-horizontal\" key={id}>\r\n      <div className=\"field-label is-normal\">\r\n        <label htmlFor={id} className=\"label\">{label || name}</label>\r\n      </div>\r\n      <div className=\"field-body\">\r\n        <div className=\"field\">\r\n          <div className=\"control\">\r\n            <input  type=\"text\"\r\n                    className=\"input\"\r\n                    id={id}\r\n                    name={name}\r\n                    value={value}\r\n                    required={!optional}\r\n                    onChange={function (eventInfo) {\r\n                      onChange(name, eventInfo.target.value)\r\n                    }}/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction NumberInput ({ name, label, value, optional, onChange }) {\r\n  let id = `config.${name}`\r\n  return (\r\n    <div className=\"field is-horizontal\" key={id}>\r\n      <div className=\"field-label is-normal\">\r\n        <label htmlFor={id} className=\"label\">{label || name}</label>\r\n      </div>\r\n      <div className=\"field-body\">\r\n        <div className=\"field\">\r\n          <div className=\"control\">\r\n            <input  type=\"number\"\r\n                    className=\"input\"\r\n                    id={id}\r\n                    name={name}\r\n                    value={parseFloat(value)}\r\n                    required={!optional}\r\n                    step=\"1\"\r\n                    onChange={function (eventInfo) {\r\n                      onChange(name, parseFloat(eventInfo.target.value))\r\n                    }}/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default BustabitScriptConfig\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport ReactDOM from \"react-dom\";\r\nimport * as d3 from 'd3';\r\n\r\nimport './LineChart.css';\r\n\r\nclass LineChart extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      tooltipData: undefined\r\n    }\r\n\r\n    this.handleTooltipChange    = this.handleTooltipChange.bind(this)\r\n    this.shouldUpdateLineChart  = this.shouldUpdateLineChart.bind(this)\r\n    this.updateLineChart        = this.updateLineChart.bind(this)\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.container = ReactDOM.findDOMNode(this)\r\n    this.updateLineChart()\r\n  }\r\n\r\n  componentDidUpdate (prevProps, prevState) {\r\n    if (this.shouldUpdateLineChart(prevProps)) {\r\n      this.updateLineChart()\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const {\r\n      viewBoxWidth, viewBoxHeight,\r\n      data, xAccessor, yAccessor,\r\n      crosshairEnabled, crosshairClassName,\r\n      className = '', ...rest } = this.props\r\n    return (\r\n      <div {...rest} className={`LineChart ${className}`}>\r\n        <svg preserveAspectRatio=\"xMinYMin meet\"></svg>\r\n        <div className=\"tooltip-container\" style={{ visibility: (this.state.tooltipData ? undefined : 'hidden')}}>\r\n          <Tooltip className=\"tooltip\" data={this.state.tooltipData}/>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  handleTooltipChange ({ data }) {\r\n    this.setState({ tooltipData: data })\r\n  }\r\n\r\n  shouldUpdateLineChart(prevProps) {\r\n    const didChange = (propName) => {\r\n      let prev = prevProps[propName],\r\n          current = this.props[propName];\r\n      return prev !== current || (Array.isArray(prev) && prev.length !== current.length);\r\n    }\r\n    const lineChartProps = [\r\n      'viewBoxWidth', 'viewBoxHeight',\r\n      'data', 'xAccessor', 'yAccessor'\r\n    ]\r\n    return lineChartProps.some(didChange)\r\n  }\r\n\r\n  updateLineChart () {\r\n    d3LineChart({\r\n      container: this.container,\r\n\r\n      viewBoxWidth: this.props.viewBoxWidth,\r\n      viewBoxHeight: this.props.viewBoxHeight,\r\n\r\n      onTooltipChange: this.handleTooltipChange,\r\n\r\n      data: this.props.data,\r\n      xAccessor: this.props.xAccessor,\r\n      yAccessor: this.props.yAccessor,\r\n\r\n      crosshairEnabled: this.props.crosshairEnabled,\r\n      crosshairClassName: this.props.crosshairClassName,\r\n    })\r\n  }\r\n}\r\n\r\nLineChart.propTypes = {\r\n  viewBoxWidth: PropTypes.number.isRequired,\r\n  viewBoxHeight: PropTypes.number.isRequired,\r\n  data: PropTypes.array.isRequired,\r\n  xAccessor: PropTypes.func.isRequired,\r\n  yAccessor: PropTypes.func.isRequired,\r\n  crosshairEnabled: PropTypes.bool,\r\n  crosshairClassName: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\r\n}\r\n\r\nclass Tooltip extends Component {\r\n  render () {\r\n    const { data, ...wrapper} = this.props\r\n    const { id, hash, bust, wager, payout, cashedAt, profit, balance } = data || {}\r\n    return (\r\n      <div  {...wrapper}>\r\n        {data && (\r\n          <table className=\"table is-hoverable is-transparent\">\r\n            <tbody>\r\n              <tr>\r\n                <th>Game ID</th>\r\n                <td>{id}</td>\r\n              </tr>\r\n              <tr>\r\n                <th>Hash</th>\r\n                <td><input className=\"input\" type=\"text\" value={hash} readOnly={true}/></td>\r\n              </tr>\r\n              <tr>\r\n                <th>Bust</th>\r\n                <td>{`${bust}x`}</td>\r\n              </tr>\r\n              <tr>\r\n                <th>Bet</th>\r\n                <td>{wager === 0 ? 'Didn\\'t play' : `${payout}x ${Math.round(wager)/100} bits`}</td>\r\n              </tr>\r\n              <tr>\r\n                <th>Cashed At</th>\r\n                <td>{cashedAt > 0 ? `${cashedAt}x` : '-'}</td>\r\n              </tr>\r\n              <tr>\r\n                <th>Profit</th>\r\n                <td className={profit === 0 ? 'has-text-warning' : (profit > 0 ? 'has-text-success' : 'has-text-danger')}>{Math.round(profit)/100} bits</td>\r\n              </tr>\r\n              <tr>\r\n                <th>Balance</th>\r\n                <td>{Math.round(balance)/100} bits</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction d3LineChart ({\r\n  container,\r\n  viewBoxWidth,\r\n  viewBoxHeight,\r\n  data,\r\n  xAccessor,\r\n  yAccessor,\r\n  onTooltipChange,\r\n  crosshairEnabled,\r\n  crosshairClassName\r\n}) {\r\n  if (!container) {\r\n    throw new TypeError('container should be an HTMLElement')\r\n  }\r\n  if (isNaN(viewBoxWidth) || isNaN(viewBoxHeight)) {\r\n    throw new TypeError('viewBoxWidth and viewBoxHeight should be numbers')\r\n  }\r\n  if (!xAccessor || !yAccessor || typeof(xAccessor) !== 'function' || typeof(yAccessor) !== 'function') {\r\n    throw new TypeError('xAccessor and yAccessor should be functions')\r\n  }\r\n  if (!data || !Array.isArray(data)) {\r\n    throw new TypeError('data should be an array')\r\n  }\r\n  if (onTooltipChange && typeof(onTooltipChange) !== 'function') {\r\n    throw new TypeError('onTooltipChange should be a function')\r\n  }\r\n  if (crosshairEnabled && crosshairClassName\r\n    && typeof(crosshairClassName) !== 'string'\r\n    && typeof(crosshairClassName) !== 'function') {\r\n    throw new TypeError('crosshairClassName should be a string or a function')\r\n  }\r\n\r\n  container = d3.select(container)\r\n  const svgElement = container.select('svg')\r\n  if (!svgElement) { throw new TypeError('container should have a child <svg></svg>'); }\r\n  let tooltipElement = container.select('.tooltip')\r\n\r\n  svgElement\r\n    .attr(\"viewBox\", `0 0 ${viewBoxWidth} ${viewBoxHeight}`);\r\n\r\n  const margin = {top: 20, right: 20, bottom: 110, left: 40},\r\n        margin2 = {top: 430, right: 20, bottom: 30, left: 40},\r\n        width = +viewBoxWidth - margin.left - margin.right,\r\n        height = +viewBoxHeight - margin.top - margin.bottom,\r\n        height2 = +viewBoxHeight - margin2.top - margin2.bottom;\r\n\r\n  svgElement.selectAll('*').remove()\r\n\r\n  const xScale  = d3.scaleLinear().range([0, width]),\r\n        xScale2 = d3.scaleLinear().range([0, width]),\r\n        yScale  = d3.scaleLinear().range([height, 0]),\r\n        yScale2 = d3.scaleLinear().range([height2, 0]);\r\n\r\n  const xAxis = d3.axisBottom(xScale),\r\n        xAxis2 = d3.axisBottom(xScale2),\r\n        yAxis = d3.axisLeft(yScale).tickFormat(function (n) { return (Math.round(n)/100) });\r\n\r\n  // line\r\n  var lineX = function (d) { return xScale(xAccessor(d)); }\r\n  var lineY = function (d) { return yScale(yAccessor(d)); }\r\n  var line = d3.line().x(lineX).y(lineY);\r\n\r\n  var line2X = function (d) { return xScale2(xAccessor(d)); }\r\n  var line2Y = function (d) { return yScale2(yAccessor(d)); }\r\n  var line2 = d3.line().x(line2X).y(line2Y);\r\n\r\n  var selected;\r\n  var brush = d3.brushX()\r\n      .extent([[0, 0], [width, height2]])\r\n      .on(\"brush end\", brushed);\r\n\r\n  var zoom = d3.zoom()\r\n      .scaleExtent([1, Infinity])\r\n      .translateExtent([[0, 0], [width, height]])\r\n      .extent([[0, 0], [width, height]])\r\n      .on(\"zoom\", zoomed);\r\n\r\n\r\n\r\n  // create svg elements\r\n\r\n  svgElement.append(\"defs\").append(\"svg:clipPath\")\r\n      .attr(\"id\", \"clip\")\r\n      .append(\"svg:rect\")\r\n      .attr(\"width\", width)\r\n      .attr(\"height\", height)\r\n      .attr(\"x\", 0)\r\n      .attr(\"y\", 0);\r\n\r\n\r\n  var g_lines = svgElement.append(\"g\")\r\n      .attr(\"class\", \"data-lines\")\r\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\r\n      .attr(\"clip-path\", \"url(#clip)\");\r\n\r\n  var crosshairElement;\r\n  if (crosshairEnabled) {\r\n    crosshairElement = svgElement.append(\"g\")\r\n    crosshairElement.attr(\"class\", \"crosshair\")\r\n                    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\r\n                    .attr(\"clip-path\", \"url(#clip)\");\r\n    crosshairElement.append(\"line\")\r\n                    .attr(\"class\", \"crosshair-line crosshair-line-x\")\r\n    crosshairElement.append(\"line\")\r\n                    .attr(\"class\", \"crosshair-line crosshair-line-y\")\r\n  }\r\n\r\n  var g_axes = svgElement.append(\"g\")\r\n      .attr(\"class\", \"axes\")\r\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n  var context = svgElement.append(\"g\")\r\n      .attr(\"class\", \"context\")\r\n      .attr(\"transform\", \"translate(\" + margin2.left + \",\" + margin2.top + \")\");\r\n\r\n\r\n  var overlay = svgElement.append(\"rect\")\r\n    .attr(\"class\", \"zoom\")\r\n    .attr(\"width\", width)\r\n    .attr(\"height\", height)\r\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\r\n\r\n\r\n  withData(data)\r\n\r\n  function withData(data) {\r\n\r\n    xScale.domain(d3.extent(data, xAccessor));\r\n    yScale.domain(d3.extent(data, yAccessor));\r\n    xScale2.domain(xScale.domain());\r\n    yScale2.domain(yScale.domain());\r\n\r\n    g_axes.append(\"g\")\r\n          .attr(\"class\", \"axis axis-x\")\r\n          .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n          .call(xAxis);\r\n\r\n    g_axes.append(\"g\")\r\n          .attr(\"class\", \"axis axis-y\")\r\n          .call(yAxis);\r\n\r\n\r\n    g_lines.append(\"path\")\r\n           .datum(data)\r\n           .attr(\"class\", \"data-line\")\r\n           .attr(\"d\", line);\r\n\r\n    g_lines.selectAll(\".data-point\")\r\n           .data(data)\r\n           .enter().append(\"circle\")\r\n           .attr(\"class\", function (d) { return \"data-point \" + (d.profit === 0 ? 'is-warning' : (d.profit > 0 ? 'is-success' : 'is-danger')) })\r\n           .attr(\"cx\", lineX)\r\n           .attr(\"cy\", lineY)\r\n           .attr(\"r\", 0)\r\n\r\n    context.append(\"path\")\r\n           .datum(data)\r\n           .attr(\"class\", \"data-line\")\r\n           .attr(\"d\", line2);\r\n\r\n    context.append(\"g\")\r\n           .attr(\"class\", \"axis axis-x\")\r\n           .attr(\"transform\", \"translate(0,\" + height2 + \")\")\r\n           .call(xAxis2);\r\n\r\n    context.append(\"g\")\r\n           .attr(\"class\", \"brush\")\r\n           .call(brush)\r\n           .call(brush.move, xScale.range());\r\n\r\n    overlay.call(zoom);\r\n    overlay.on(\"mousemove\",mousemove)\r\n      .on(\"mouseover\", function () {\r\n        if (tooltipElement) {\r\n          tooltipElement.style(\"opacity\", 1);\r\n        }\r\n        if (crosshairElement) {\r\n          crosshairElement.style(\"opacity\", 1);\r\n        }\r\n      })\r\n      .on(\"mouseout\", function () {\r\n        if (tooltipElement) {\r\n          tooltipElement.style(\"opacity\", 0);\r\n        }\r\n        if (crosshairElement) {\r\n          crosshairElement.style(\"opacity\", 0);\r\n        }\r\n        g_lines.selectAll('.data-point')\r\n         .classed('hover', false)\r\n      });\r\n\r\n    let bisect = d3.bisector(function (d, dx) { return dx - xAccessor(d) }).left\r\n\r\n    function mousemove () {\r\n\r\n      const mousex = d3.mouse(this)[0],\r\n            dx = xScale.invert(mousex),\r\n            i = bisect(data, dx),\r\n            d0 = data[i - 1],\r\n            d1 = data[i];\r\n\r\n      let d;\r\n      if (!d1) d = d0;\r\n      else if (!d0) d = d1;\r\n      else d = Math.abs(dx - xAccessor(d1)) > Math.abs(dx - xAccessor(d0)) ? d0 : d1;\r\n\r\n      selected = d\r\n\r\n      g_lines.selectAll('.data-point')\r\n         .classed('hover', (d) => xAccessor(d) === xAccessor(selected))\r\n      moveCrosshair(selected)\r\n      moveTooltip(d)\r\n    }\r\n  }\r\n\r\n  function moveTooltip (d) {\r\n    if (tooltipElement && svgElement && container && viewBoxWidth && viewBoxHeight) {\r\n      let svgMouse = d3.mouse(svgElement.node()),\r\n          containerMouse = d3.mouse(container.node());\r\n\r\n      let tooltipX, tooltipY;\r\n      const tooltipOffset = {\r\n        left: 25,\r\n        top: 25\r\n      }\r\n      const tooltipSize = tooltipElement.node().getBoundingClientRect()\r\n      if (svgMouse[0] > viewBoxWidth - tooltipSize.width) {\r\n        tooltipX = containerMouse[0] - tooltipSize.width - tooltipOffset.left\r\n      } else {\r\n        tooltipX = containerMouse[0] + tooltipOffset.left\r\n      }\r\n\r\n      if (svgMouse[1] > viewBoxHeight - tooltipSize.height) {\r\n        tooltipY = containerMouse[1] - tooltipSize.height - tooltipOffset.top\r\n      } else {\r\n        tooltipY = containerMouse[1] + tooltipOffset.top\r\n      }\r\n      /*\r\n      if (overlayMouse[0] > width/2) {\r\n        tooltipX = containerMouse[0] - tooltipElement.node().getBoundingClientRect().width - tooltipOffset.left\r\n      } else {\r\n        tooltipX = containerMouse[0] + tooltipOffset.left\r\n      }\r\n      if (overlayMouse[1] > height/2) {\r\n        tooltipY = containerMouse[1] + tooltipOffset.top\r\n      } else {\r\n        tooltipY = containerMouse[1] - tooltipElement.node().getBoundingClientRect().height - tooltipOffset.top\r\n      }*/\r\n\r\n\r\n      tooltipElement\r\n        .style('top', tooltipY + 'px')\r\n        .style('left', tooltipX + 'px')\r\n\r\n      if (onTooltipChange) {\r\n        onTooltipChange({ data: d })\r\n      }\r\n    }\r\n  }\r\n\r\n  function moveCrosshair(d) {\r\n    let xdomain = xScale.domain()\r\n    let ydomain = yScale.domain()\r\n    crosshairElement\r\n      .select('.crosshair-line-x')\r\n      .transition()\r\n      .ease(d3.easeLinear)\r\n      .attr('x1', lineX(d)).attr('y1', yScale(ydomain[0]))\r\n      .attr('x2', lineX(d)).attr('y2', yScale(ydomain[1]))\r\n      .duration(100);\r\n    crosshairElement\r\n      .select('.crosshair-line-y')\r\n      .transition()\r\n      .ease(d3.easeLinear)\r\n      .attr('x1', xScale(xdomain[0])).attr('y1', lineY(d))\r\n      .attr('x2', xScale(xdomain[1])).attr('y2', lineY(d))\r\n      .duration(100);\r\n  }\r\n\r\n\r\n  function brushed() {\r\n    if (d3.event.sourceEvent && d3.event.sourceEvent.type === \"zoom\") return; // ignore brush-by-zoom\r\n    var s = d3.event.selection || xScale2.range();\r\n    xScale.domain(s.map(xScale2.invert, xScale2));\r\n\r\n    g_lines.select(\".data-line\")\r\n      .attr(\"d\", line);\r\n    g_lines.selectAll(\".data-point\")\r\n      .attr(\"cx\", lineX)\r\n      .attr(\"cy\", lineY);\r\n\r\n    if (selected) moveCrosshair(selected);\r\n\r\n    g_axes.select(\".axis-x\").call(xAxis);\r\n    svgElement.select(\".zoom\").call(zoom.transform, d3.zoomIdentity\r\n      .scale(width / (s[1] - s[0]))\r\n      .translate(-s[0], 0));\r\n  }\r\n\r\n  function zoomed() {\r\n    if (d3.event.sourceEvent && d3.event.sourceEvent.type === \"brush\") return; // ignore zoom-by-brush\r\n    var t = d3.event.transform;\r\n    xScale.domain(t.rescaleX(xScale2).domain());\r\n\r\n    g_lines.select(\".data-line\")\r\n      .attr(\"d\", line);\r\n    g_lines.selectAll(\".data-point\")\r\n      .attr(\"cx\", lineX)\r\n      .attr(\"cy\", lineY)\r\n\r\n    if (selected) moveCrosshair(selected);\r\n\r\n    g_axes.select(\".axis-x\").call(xAxis);\r\n    context.select(\".brush\").call(brush.move, xScale.range().map(t.invertX, t));\r\n  }\r\n\r\n}\r\n\r\nexport default LineChart\r\n","import React, { Component } from 'react';\r\nimport Config from './BustabitScriptConfig';\r\nimport LineChart from './LineChart'\r\nimport PropTypes from 'prop-types'\r\nimport './BustabitScript.css'\r\n\r\nclass App extends Component {\r\n\r\n  viewState() {\r\n    if (this.props.scripts.editing) {\r\n      return 'edit'\r\n    }\r\n    if (this.props.scripts.creating) {\r\n      return 'new'\r\n    }\r\n    if (this.props.scripts.deleting) {\r\n      return 'delete'\r\n    }\r\n    if (this.props.scripts.selected) {\r\n      return 'show'\r\n    }\r\n    return 'list'\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.scripts.load()\r\n  }\r\n\r\n  render() {\r\n    const viewState = this.viewState()\r\n    const { scripts, className = '', ...rest } = this.props\r\n    return (\r\n      <div {...rest} className={className}>\r\n        {(viewState === 'list' || viewState === 'delete') && (\r\n          <List\r\n            scripts={scripts} />\r\n        )}\r\n        {viewState === 'edit' && (\r\n          <Edit\r\n            script={scripts.editing}\r\n            error={scripts.updateError}\r\n            onCancel={scripts.onCancel}\r\n            onSave={scripts.onSave} />\r\n        )}\r\n        {viewState === 'new' && (\r\n          <New\r\n            script={scripts.creating}\r\n            error={scripts.createError}\r\n            onCancel={scripts.onCancel}\r\n            onSave={scripts.onSave} />\r\n        )}\r\n        {viewState === 'show' && (\r\n          <Show\r\n            scripts={scripts} />\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass Title extends Component {\r\n  render() {\r\n    const { className = '', ...rest } = this.props\r\n    return (\r\n      <div {...rest} className={`${className}`}>\r\n        <p>\r\n          <span className=\"bustabit-logo\" />\r\n          <span className=\"bustabit-title\">\r\n            Bustabit\r\n          </span>\r\n        </p>\r\n        <p>\r\n          <span className=\"script-simulator-title\">\r\n            Script Simulator\r\n          </span>\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass List extends Component {\r\n  render() {\r\n    const { className = '', scripts, ...rest } = this.props\r\n    let deletingId = scripts.deleting ? scripts.deleting.id : undefined\r\n    return (\r\n      <div {...rest} className={`BustabitScript-List box is-inline-block ${className}`}>\r\n        <table className=\"table is-hoverable\">\r\n          <thead>\r\n            <tr>\r\n              <th colSpan=\"2\">\r\n                <h3 className=\"subtitle is-4\">\r\n                  My Scripts\r\n                </h3>\r\n              </th>\r\n              <th colSpan=\"2\">\r\n                <NewButton\r\n                  onClick={() => scripts.onNew()} />\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {scripts.items.entrySeq().map(([index, script]) => {\r\n              let id = script.id\r\n              if (id === deletingId) {\r\n                return (\r\n                  <tr key={id}>\r\n                    <th>{script.name}</th>\r\n                    <td colSpan=\"3\" style={{ maxWidth: '9rem' }}>\r\n                      <Delete key={id}\r\n                        script={scripts.deleting}\r\n                        onCancel={scripts.onCancel}\r\n                        onDeleted={scripts.onDeleted} />\r\n                    </td>\r\n                  </tr>\r\n                )\r\n              }\r\n              return (\r\n                <tr key={id}>\r\n                  <th>{script.name}</th>\r\n                  <td>\r\n                    <SelectButton\r\n                      onClick={() => scripts.onSelect(id)} />\r\n                  </td>\r\n                  <td>\r\n                    <EditButton\r\n                      onClick={() => scripts.onEdit(id)} />\r\n                  </td>\r\n                  <td>\r\n                    <DeleteButton\r\n                      onClick={() => scripts.onDelete(id)} />\r\n                  </td>\r\n                </tr>\r\n              )\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction msToTime(duration) {\r\n  var milliseconds = parseInt((duration % 1000) / 100),\r\n    seconds = parseInt((duration / 1000) % 60),\r\n    minutes = parseInt((duration / (1000 * 60)) % 60),\r\n    hours = parseInt((duration / (1000 * 60 * 60)) % 24),\r\n    days = parseInt((duration / (1000 * 60 * 60 * 24)));\r\n\r\n  hours = (hours < 10) ? \"0\" + hours : hours;\r\n  minutes = (minutes < 10) ? \"0\" + minutes : minutes;\r\n  seconds = (seconds < 10) ? \"0\" + seconds : seconds;\r\n\r\n  return (days > 0 ? days + \"d \" : \"\") + hours + \"h \" + minutes + \"m \" + seconds + \"s\";\r\n}\r\n\r\nclass Show extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      script: props.scripts.selected,\r\n      startingBalance: 1000000,\r\n      gameHash: '7edbd07968e771f205a4e2b67701c2f6993437db0c557160ba79ee70ea6d10c6',\r\n      gameAmount: 1000,\r\n      drawChart: true,\r\n      quickTest: true,\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.scripts.results !== prevProps.scripts.results) {\r\n      let resultsElement = document.getElementById(\"results\")\r\n      if (resultsElement) {\r\n        const y = resultsElement.getBoundingClientRect().top + window.scrollY;\r\n        window.scrollTo({ behavior: 'smooth', top: y })\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { className = '', scripts, ...rest } = this.props\r\n    return (\r\n      <div {...rest} className={`BustabitScript Show ${className}`}>\r\n        {this.state.script && (\r\n          <div key={this.state.script.id}>\r\n            <div className=\"box is-inline-block has-text-left\">\r\n              <div>\r\n                <GoBackButton\r\n                  className={`${scripts.isLoading ? 'is-loading' : ''}`}\r\n                  onClick={scripts.onDeselect} />\r\n                <EditButton\r\n                  className=\"is-pulled-right\"\r\n                  onClick={() => scripts.onEdit(this.state.script.id)} />\r\n              </div>\r\n              <hr className=\"hr\" />\r\n              <Config\r\n                config={this.state.script.config}\r\n                onChange={config => {\r\n                  this.setState(({ script }) => {\r\n                    script.config = config\r\n                    return { script }\r\n                  })\r\n                }} />\r\n              <hr className=\"hr\" />\r\n              <Control label=\"Starting Balance\"\r\n                icon=\"fas fa-coins\">\r\n                <input className=\"input is-normal\"\r\n                  type=\"number\" required={true}\r\n                  min=\"1\" step=\"1\"\r\n                  name=\"startingBalance\"\r\n                  value={this.state.startingBalance / 100}\r\n                  onChange={(event) => {\r\n                    let changes = { [event.target.name]: parseFloat(event.target.value) * 100 }\r\n                    this.setState(changes)\r\n                  }} />\r\n              </Control>\r\n              <Control label=\"Hash\"\r\n                icon=\"fas fa-key\">\r\n                <input className=\"input is-normal\"\r\n                  type=\"text\" required={true}\r\n                  name=\"gameHash\"\r\n                  value={this.state.gameHash}\r\n                  onChange={(event) => {\r\n                    this.setState({ [event.target.name]: String(event.target.value) })\r\n                  }} />\r\n              </Control>\r\n\r\n              <Control label=\"Games\"\r\n                icon=\"fas fa-hashtag\">\r\n                <input className=\"input is-normal\"\r\n                  type=\"number\" required={true}\r\n                  min=\"1\" step=\"1\"\r\n                  name=\"gameAmount\"\r\n                  value={this.state.gameAmount}\r\n                  onChange={(event) => {\r\n                    this.setState({ [event.target.name]: parseInt(event.target.value) })\r\n                  }} />\r\n              </Control>\r\n              <hr className=\"hr\" />\r\n              <div className=\"field is-grouped\">\r\n                <div className=\"control\">\r\n                  <button className={`button is-success ${scripts.isLoading ? 'is-loading' : ''}`}\r\n                    disabled={!(\r\n                      this.state.script &&\r\n                      this.state.gameHash &&\r\n                      this.state.gameAmount &&\r\n                      this.state.startingBalance\r\n                    )}\r\n                    onClick={() => {\r\n                      let args = {\r\n                        script: this.state.script,\r\n                        gameHash: this.state.gameHash,\r\n                        gameAmount: this.state.gameAmount,\r\n                        startingBalance: this.state.startingBalance,\r\n                        drawChart: this.state.drawChart,\r\n                        quickTest: this.state.quickTest,\r\n                      };\r\n                      scripts.onRun(args)\r\n                    }}>\r\n                    Run Script\r\n                  </button>\r\n                </div>\r\n                <div className=\"control\">\r\n                  <p>\r\n                    <label className=\"checkbox\">\r\n                      <input className=\"checkbox\"\r\n                        type=\"checkbox\"\r\n                        name=\"drawChart\"\r\n                        checked={this.state.drawChart}\r\n                        onChange={(event) => {\r\n                          this.setState({ [event.target.name]: Boolean(event.target.checked) })\r\n                        }} />\r\n                    &nbsp;\r\n                    Enable Chart\r\n                  </label>\r\n                  </p><p>\r\n                    <label className=\"checkbox\">\r\n                      <input className=\"checkbox\"\r\n                        type=\"checkbox\"\r\n                        name=\"quickTest\"\r\n                        checked={this.state.quickTest}\r\n                        onChange={(event) => {\r\n                          this.setState({ [event.target.name]: Boolean(event.target.checked) })\r\n                        }} />\r\n                    &nbsp;\r\n                    Enable Log\r\n                  </label>\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <textarea className=\"textarea\"\r\n                  value={scripts.results ? scripts.results.log : undefined}\r\n                  readOnly={true}\r\n                  style={{ width: '100%', height: '200px', resize: 'both' }}\r\n                  placeholder=\"Script logs will appear here\">\r\n                </textarea>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {scripts.selected && scripts.results && (\r\n          <section className=\"section\">\r\n            <div id=\"results\" />\r\n            {scripts.results.error && (\r\n              <div className=\"notification is-danger\">\r\n                <h3 className=\"is-3\">Error</h3>\r\n                <pre className=\"notification is-danger has-text-left\">\r\n                  {String(scripts.results.error)}\r\n                </pre>\r\n              </div>\r\n            )}\r\n            {!scripts.results.error && (\r\n              <div className=\"columns\">\r\n                <div className=\"column is-one-fifth\">\r\n                  <table className={\"table is-hoverable box is-inline-block\"}>\r\n                    <tbody>\r\n                      <tr>\r\n                        <th>Games Played</th>\r\n                        <td>{scripts.results.bets} games</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Duration</th>\r\n                        <td>{msToTime(scripts.results.duration)}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Start Balance</th>\r\n                        <td>{scripts.results.startingBalance / 100} bits</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Smallest Bet</th>\r\n                        <td>{scripts.results.lowBet / 100} bits</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Largest Bet</th>\r\n                        <td>{scripts.results.highBet / 100} bits</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Win Streak</th>\r\n                        <td>{scripts.results.winStreak} games</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Lose Streak</th>\r\n                        <td>{scripts.results.loseStreak} games</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Streak Cost</th>\r\n                        <td>{scripts.results.streakSum / 100} bits</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Profit ATL</th>\r\n                        <td>{(scripts.results.profitATL / 100).toFixed(2)} bits</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Profit ATH</th>\r\n                        <td>{(scripts.results.profitATH / 100).toFixed(2)} bits</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Balance ATL</th>\r\n                        <td>{(scripts.results.balanceATL / 100).toFixed(2)} bits</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>Balance ATH</th>\r\n                        <td>{(scripts.results.balanceATH / 100).toFixed(2)} bits</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>End Profit</th>\r\n                        <td className={`${scripts.results.profit >= 0 ? 'has-text-success' : 'has-text-danger'}`}>{(Math.round(scripts.results.profit) / 100).toFixed(2)} bits</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <th>End Balance</th>\r\n                        <td>{scripts.results.balance / 100} bits</td>\r\n                      </tr>\r\n                      {scripts.results.profit > 0 && (\r\n                        <tr>\r\n                          <th>Profit per hour</th>\r\n                          <td>{Math.round(scripts.results.profitPerHour) / 100} bits</td>\r\n                        </tr>\r\n                      )}\r\n                      <tr>\r\n                        <td colSpan=\"2\">{scripts.results.message || ''}</td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n                {scripts.results.chartData && (\r\n                  <div className=\"column\">\r\n                    <div className=\"has-text-centered box\">\r\n                      <LineChart {...{\r\n                        viewBoxWidth: 960,\r\n                        viewBoxHeight: 500,\r\n                        data: scripts.results.chartData,\r\n                        xAccessor: (d) => { return d.id },\r\n                        yAccessor: (d) => { return d.balance },\r\n                        crosshairEnabled: true,\r\n                        crosshairClassName: (d) => { return d.profit > 0 ? 'is-success' : 'is-danger' },\r\n                      }} />\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n            <BackToTopButton />\r\n          </section>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass Delete extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        {!this.props.script ? null : (\r\n          <div>\r\n            <p>\r\n              Are you sure you want to delete this script?\r\n            </p>\r\n            <div className=\"buttons is-pulled-right\">\r\n              <button\r\n                className=\"button\"\r\n                onClick={() => {\r\n                  let id = this.props.script.id\r\n                  this.props.onDeleted(id, true)\r\n                }}>Yes</button>\r\n              <button\r\n                className=\"button\"\r\n                onClick={this.props.onCancel}>No</button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass EditButton extends Component {\r\n  render() {\r\n    const { className = '', ...rest } = this.props\r\n    return (\r\n      <div className={`BustabitScript EditButton control ${className}`}>\r\n        <button {...rest} className={`button is-info ${className}`}>\r\n          <span className=\"icon is-normal\" width=\"2em\" height=\"2em\">\r\n            <i className=\"fas fa-eye\"></i>\r\n          </span>\r\n        </button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass SelectButton extends Component {\r\n  render() {\r\n    const { className = '', ...rest } = this.props\r\n    return (\r\n      <div className={\"BustabitScript SelectButton control\"}>\r\n        <button {...rest} className={`button ${className}`}>\r\n          <span className=\"icon is-normal\" width=\"2em\" height=\"2em\">\r\n            <i className=\"fas fa-play\"></i>\r\n          </span>\r\n        </button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass DeleteButton extends Component {\r\n  render() {\r\n    const { className = '', ...rest } = this.props\r\n    return (\r\n      <div className={\"BustabitScript DeleteButton control\"}>\r\n        <button {...rest} className={`button ${className}`}>\r\n          <span className=\"icon is-normal\" width=\"2em\" height=\"2em\">\r\n            <i className=\"fas fa-trash-alt\"></i>\r\n          </span>\r\n        </button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass NewButton extends Component {\r\n  render() {\r\n    const { className = '', ...rest } = this.props\r\n    return (\r\n      <div className=\"BustabitScript NewButton control is-pulled-right\">\r\n        <button {...rest} className={`button is-success ${className}`}>\r\n          <span className=\"icon is-normal\" width=\"2em\" height=\"2em\">\r\n            <i className=\"fas fa-plus\"></i>\r\n          </span>\r\n          <span>New</span>\r\n        </button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass GoBackButton extends Component {\r\n  render() {\r\n    const { className = '', ...rest } = this.props\r\n    return (\r\n      <a {...rest} className={`button is-normal ${className}`}>\r\n        <span className=\"icon is-medium\">\r\n          <i className=\"fas fa-arrow-left\"></i>\r\n        </span>\r\n        <span>Go Back</span>\r\n      </a>\r\n    )\r\n  }\r\n}\r\n\r\nclass BackToTopButton extends Component {\r\n  render() {\r\n    const { className = '', onClick, ...rest } = this.props || {}\r\n    return (\r\n      <button {...rest} className={`button is-normal ${className}`}\r\n        onClick={() => {\r\n          window.scroll({ top: 0, behavior: 'smooth' })\r\n          if (onClick) onClick();\r\n        }}>\r\n        <span className=\"icon is-medium\">\r\n          <i className=\"fas fa-arrow-up\"></i>\r\n        </span>\r\n        <span>Back to Top</span>\r\n      </button>\r\n    )\r\n  }\r\n}\r\n\r\nclass Edit extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.close = this.close.bind(this)\r\n  }\r\n\r\n  close(event) {\r\n    if (event) { event.preventDefault(); }\r\n    this.props.onCancel()\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={'BustabitScript Edit modal' + (this.props.script ? ' is-active' : '')}>\r\n        <div className=\"modal-background\"\r\n          onClick={this.close}></div>\r\n        <div className=\"modal-card\" style={{ width: '90%' }}>\r\n          <form onSubmit={(event) => {\r\n            if (event) { event.preventDefault(); }\r\n            const id = String(event.target.id.value || '').trim()\r\n            const name = String(event.target.name.value || '').trim()\r\n            const text = String(event.target.text.value || '').trim()\r\n            const script = { ...this.props.script, id, name, text }\r\n            this.props.onSave(script)\r\n          }}>\r\n            <header className=\"modal-card-head\">\r\n              <p className=\"modal-card-title\">Edit Script</p>\r\n              <button className=\"delete\"\r\n                onClick={this.close}>\r\n              </button>\r\n            </header>\r\n            <section className=\"modal-card-body\">\r\n              {this.props.error && (\r\n                <div className=\"notification is-warning\">\r\n                  <p><strong>Error</strong></p>\r\n                  <pre className=\"notification is-warning has-text-left\">\r\n                    {String(this.props.error)}\r\n                  </pre>\r\n                </div>\r\n              )}\r\n              <input className=\"input\"\r\n                type=\"hidden\"\r\n                name=\"id\"\r\n                defaultValue={this.props.script ? this.props.script.id : ''} />\r\n              <input className=\"input is-normal\"\r\n                required={true}\r\n                type=\"text\"\r\n                name=\"name\"\r\n                defaultValue={this.props.script ? this.props.script.name : ''} />\r\n              <textarea className=\"textarea is-normal\"\r\n                required={true}\r\n                rows=\"10\"\r\n                name=\"text\"\r\n                defaultValue={this.props.script ? this.props.script.text : ''}>\r\n              </textarea>\r\n            </section>\r\n            <footer className=\"modal-card-foot\">\r\n              <button className=\"button is-success\"\r\n                type=\"submit\">\r\n                Save Script\r\n              </button>\r\n              <button className=\"button\"\r\n                onClick={this.close}>\r\n                Cancel\r\n              </button>\r\n            </footer>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nEdit.propTypes = {\r\n  script: PropTypes.shape({\r\n    id: PropTypes.string.isRequired,\r\n    name: PropTypes.string.isRequired,\r\n    text: PropTypes.string.isRequired,\r\n    config: PropTypes.object,\r\n  }).isRequired,\r\n  onCancel: PropTypes.func.isRequired,\r\n  onSave: PropTypes.func.isRequired\r\n}\r\n\r\nclass New extends Edit { }\r\n\r\nNew.propTypes = {\r\n  script: PropTypes.shape({\r\n    name: PropTypes.string.isRequired,\r\n    text: PropTypes.string.isRequired\r\n  }),\r\n  onCancel: PropTypes.func.isRequired,\r\n  onSave: PropTypes.func.isRequired\r\n}\r\n\r\n\r\nclass Control extends Component {\r\n  render() {\r\n    const { children, label, icon, className = '', ...rest } = this.props\r\n    return (\r\n      <div className=\"field is-horizontal\">\r\n        {label === undefined ? null : (\r\n          <div className=\"field-label is-normal\">\r\n            <label className=\"label\">\r\n              {label}\r\n            </label>\r\n          </div>\r\n        )}\r\n        <div className=\"field-body\">\r\n          <div className=\"field\">\r\n            <div className={`control ${icon ? ' has-icons-left' : ''} ${className}`} {...rest}>\r\n              {children}\r\n              {icon && (\r\n                <span className=\"icon is-small is-left\">\r\n                  <i className={icon}></i>\r\n                </span>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default { App, Title, EditButton }\r\n","import React, { Component } from 'react';\r\n\r\nclass OptionsButton extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            isOpen: false\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { className = '', ...rest } = this.props\r\n        return (\r\n            <div>\r\n                <button {...rest} className={`button ${className}`}\r\n                    onClick={() => this.setState({ isOpen: true })}>\r\n                    <span className=\"icon is-medium\">\r\n                        <i className=\"fas fa-exclamation\"></i>\r\n                    </span>\r\n                    <span className=\"is-uppercase\">Options</span>\r\n                </button>\r\n                <OptionsModal\r\n                    isOpen={this.state.isOpen}\r\n                    onClose={() => this.setState({ isOpen: false })} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass OptionsModal extends Component {\r\n    render() {\r\n        return (\r\n            <div className={'modal' + (this.props.isOpen ? ' is-active' : '')}>\r\n                <div className=\"modal-background\"\r\n                    onClick={this.props.onClose}>\r\n                </div>\r\n                <div className=\"modal-content\">\r\n                    <div className=\"box\">\r\n                        <h4 className=\"title is-4\">\r\n                            <span\r\n                                className=\"icon is-medium\">\r\n                                <i className=\"fas fa-exclamation\"></i>\r\n                            </span>\r\n                    Options\r\n                    </h4>\r\n                        <p>In the near future you will find several </p>\r\n                    </div>\r\n                </div>\r\n                <button\r\n                    className=\"modal-close is-large\"\r\n                    onClick={this.props.onClose}>\r\n                </button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport { OptionsButton, OptionsModal }\r\n","import React, { Component } from 'react';\r\n\r\nclass DisclaimerButton extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      isOpen: false\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const { className = '', ...rest } = this.props\r\n    return (\r\n      <div>\r\n        <button {...rest} className={`button ${className}`}\r\n                onClick={() => this.setState({ isOpen: true })}>\r\n          <span className=\"icon is-medium\">\r\n            <i className=\"fas fa-exclamation\"></i>\r\n          </span>\r\n          <span className=\"is-uppercase\">Disclaimer</span>\r\n        </button>\r\n        <DisclaimerModal\r\n          isOpen={this.state.isOpen}\r\n          onClose={() => this.setState({ isOpen: false })}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass DisclaimerModal extends Component {\r\n  render () {\r\n    return (\r\n      <div className={'modal' + (this.props.isOpen ? ' is-active' : '')}>\r\n        <div className=\"modal-background\"\r\n             onClick={this.props.onClose}>\r\n        </div>\r\n        <div className=\"modal-content\">\r\n          <div className=\"box\">\r\n            <h4 className=\"title is-4\">\r\n              <span\r\n                className=\"icon is-medium\">\r\n                <i className=\"fas fa-exclamation\"></i>\r\n              </span>\r\n              Disclaimer\r\n            </h4>\r\n            <p>No one is responsible if you lose money using this tool and/or trusting its results.</p>\r\n            <p>All it does is simulate you running a script on previous bustabit games. </p>\r\n            <p>Results achieved in the past don't provide any guarantee for the future.</p>\r\n            <p>And, there's no guarantee that the simulated engine on this site, behaves in exactly the same way as the engine on bustabit.</p>\r\n          </div>\r\n        </div>\r\n        <button\r\n          className=\"modal-close is-large\"\r\n          onClick={this.props.onClose}>\r\n        </button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport { DisclaimerButton, DisclaimerModal }\r\n","import React, { Component } from 'react';\r\n\r\nclass DonateButton extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      isOpen: false\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const { className = '', ...rest } = this.props\r\n    return (\r\n      <div>\r\n        <button {...rest}\r\n                className={`button ${className}`}\r\n                onClick={() => this.setState({ isOpen: true })}>\r\n          <span className=\"icon\">\r\n            <i className=\"fas fa-hand-holding-usd\"></i>\r\n          </span>\r\n          <span className=\"is-uppercase\">Send a tip...</span>\r\n        </button>\r\n        <DonateModal\r\n          isOpen={this.state.isOpen}\r\n          onClose={() => this.setState({ isOpen: false })}/>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nclass DonateModal extends Component {\r\n  render () {\r\n    return (\r\n      <div className={'modal' + (this.props.isOpen ? ' is-active' : '')}>\r\n        <div className=\"modal-background\"\r\n             onClick={this.props.onClose}>\r\n        </div>\r\n        <div className=\"modal-content\">\r\n          <div className=\"box\">\r\n            <p><strong>Hello fellow gambler!</strong></p>\r\n            <p>I hope you like my Bustabit Simulator. I worked hard on it.\r\n              <span className=\"icon is-medium\">\r\n                <i className=\"fas fa-grin-beam-sweat\"></i>\r\n              </span>\r\n            </p>\r\n            <p>If you use this tool regularly, please consider donating a dollar or two.</p>\r\n            <p>\r\n              <a href=\"https://bustabit.com/tip\"\r\n                 target=\"_blank\" rel=\"noopener noreferrer\">\r\n                <span>https://bustabit.com/tip</span>\r\n              </a>\r\n              <span>My username is </span><span className=\"is-bold\">Mtihc</span>\r\n            </p>\r\n            <p>\r\n              <a href=\"https://paypal.me/MitchStoffels\"\r\n                 target=\"_blank\" rel=\"noopener noreferrer\">\r\n                <span>https://paypal.me/MitchStoffels</span>\r\n              </a>\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <button\r\n          className=\"modal-close is-large\"\r\n          onClick={this.props.onClose}>\r\n        </button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport { DonateModal , DonateButton }\r\n","import React from 'react';\r\nimport 'bulma/css/bulma.css'\r\nimport './AppView.css';\r\nimport BustabitScript from './components/BustabitScript'\r\nimport { OptionsButton } from './components/Options'\r\nimport { DisclaimerButton } from './components/Disclaimer'\r\nimport { DonateButton } from './components/Donate'\r\n\r\nfunction AppView(props) {\r\n  return (\r\n    <div className=\"App\">\r\n      <nav className=\"navbar has-shadow\">\r\n        <div className=\"container\">\r\n          <div className=\"navbar-brand\">\r\n            <div className=\"navbar-item\">\r\n              <BustabitScript.Title />\r\n            </div>\r\n          </div>\r\n          <div className=\"navbar-end\">\r\n            <div className=\"navbar-item\">\r\n              <div className=\"buttons\">\r\n                <OptionsButton className=\"is-small\" />\r\n                <DisclaimerButton className=\"is-small\" />\r\n                <DonateButton className=\"is-small\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n      <main className=\"section has-text-centered\">\r\n        <BustabitScript.App scripts={props.scripts} />\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AppView\r\n","const ActionTypes = {\r\n  LOADED:       'scripts/loaded',\r\n  NEW:          'scripts/new',\r\n  CREATE_ERROR: 'scripts/create-error',\r\n  CREATED:      'scripts/created',\r\n  EDIT:         'scripts/edit',\r\n  UPDATE_ERROR: 'scripts/update-error',\r\n  UPDATED:      'scripts/updated',\r\n  CANCEL:       'scripts/cancel',\r\n  DELETE:       'scripts/delete',\r\n  DELETE_ERROR: 'scripts/delete-error',\r\n  DELETED:      'scripts/deleted',\r\n  SIMULATE:     'scripts/simulate',\r\n  SIMULATED:    'scripts/simulated',\r\n};\r\n\r\nexport default ActionTypes;\r\n","import {Dispatcher} from 'flux';\r\n\r\nexport default new Dispatcher();\r\n","import Immutable from 'immutable';\r\nimport { ReduceStore } from 'flux/utils';\r\nimport ScriptActionTypes from './ScriptActionTypes';\r\nimport ScriptDispatcher from './ScriptDispatcher';\r\n\r\nclass ScriptStore extends ReduceStore {\r\n  constructor() {\r\n    super(ScriptDispatcher);\r\n  }\r\n\r\n  getInitialState() {\r\n    return Immutable.OrderedMap()\r\n  }\r\n\r\n  reduce(state, action) {\r\n\r\n    switch (action.type) {\r\n      case ScriptActionTypes.LOADED:\r\n        return state.clear().merge(action.scripts)\r\n\r\n      case ScriptActionTypes.DELETED:\r\n        return state.delete(action.id)\r\n\r\n      case ScriptActionTypes.CREATED:\r\n        return state.set(action.script.id, action.script)\r\n\r\n      case ScriptActionTypes.UPDATED:\r\n        return state.set(action.script.id, action.script)\r\n\r\n      default:\r\n        return state;\r\n    }\r\n  }\r\n}\r\n\r\nexport default new ScriptStore();\r\n","import Immutable from 'immutable';\r\nimport {ReduceStore} from 'flux/utils';\r\nimport ScriptActionTypes from './ScriptActionTypes';\r\nimport ScriptDispatcher from './ScriptDispatcher';\r\nimport ScriptConstants from './ScriptConstants';\r\n\r\nclass ScriptListStore extends ReduceStore {\r\n  constructor() {\r\n    super(ScriptDispatcher);\r\n  }\r\n\r\n  getInitialState() {\r\n    return Immutable.OrderedMap({\r\n      creating: undefined,\r\n      editingId: undefined,\r\n      deletingId: undefined,\r\n      selectedId: undefined,\r\n      isSimulating: false,\r\n      results: undefined,\r\n      error: undefined,\r\n    })\r\n  }\r\n\r\n  reduce(state, action) {\r\n    switch (action.type) {\r\n      case ScriptActionTypes.NEW:\r\n        return state.set('creating', Object.assign({}, ScriptConstants.NEW_SCRIPT))\r\n                    .set('createError', undefined)\r\n\r\n      case ScriptActionTypes.CREATED:\r\n        return state.set('creating', undefined)\r\n                    .set('createError', undefined)\r\n\r\n      case ScriptActionTypes.CREATE_ERROR:\r\n        return state.set('createError', action.error)\r\n\r\n\r\n      case ScriptActionTypes.EDIT:\r\n        return state.set('editingId', action.id)\r\n                    .set('updateError', undefined)\r\n\r\n      case ScriptActionTypes.UPDATED:\r\n        return state.set('editingId', undefined)\r\n                    .set('updateError', undefined)\r\n\r\n      case ScriptActionTypes.UPDATE_ERROR:\r\n        return state.set('updateError', action.error)\r\n\r\n\r\n      case ScriptActionTypes.DELETE:\r\n        return state.set('deletingId', action.id)\r\n                    .set('deleteError', undefined)\r\n\r\n      case ScriptActionTypes.DELETED:\r\n        return state.set('deletingId', undefined)\r\n                    .set('deleteError', undefined)\r\n\r\n      case ScriptActionTypes.DELETE_ERROR:\r\n        return state.set('deleteError', action.error)\r\n\r\n\r\n      case ScriptActionTypes.CANCEL:\r\n        return state.set('creating', undefined)\r\n                    .set('editingId', undefined)\r\n                    .set('deletingId', undefined)\r\n                    .set('createError', undefined)\r\n                    .set('updateError', undefined)\r\n                    .set('deleteError', undefined)\r\n\r\n      case ScriptActionTypes.SELECT:\r\n        return state.set('selectedId', action.id)\r\n                    .set('results', undefined)\r\n\r\n      case ScriptActionTypes.DESELECT:\r\n        return state.set('selectedId', undefined)\r\n\r\n      case ScriptActionTypes.SIMULATE:\r\n        return state.set('results', undefined)\r\n                    .set('isSimulating', true)\r\n\r\n      case ScriptActionTypes.SIMULATED:\r\n        return state.set('results', action.results)\r\n                    .set('isSimulating', false)\r\n\r\n      default:\r\n        return state;\r\n    }\r\n  }\r\n}\r\n\r\nexport default new ScriptListStore();\r\n","import ScriptActionTypes from './ScriptActionTypes';\r\nimport ScriptDispatcher from './ScriptDispatcher';\r\nimport ScriptUtils from './ScriptUtils'\r\n\r\nconst Actions = {\r\n\r\n  load () {\r\n    let scripts = ScriptUtils.load();\r\n    ScriptDispatcher.dispatch({ type: ScriptActionTypes.LOADED, scripts });\r\n  },\r\n\r\n  restoreSamples () {\r\n    let scripts = ScriptUtils.restoreSamples()\r\n    ScriptDispatcher.dispatch({ type: ScriptActionTypes.LOADED, scripts });\r\n  },\r\n\r\n  delete (id) {\r\n    ScriptDispatcher.dispatch({ type: ScriptActionTypes.DELETE, id })\r\n  },\r\n\r\n  deleted (id) {\r\n    ScriptUtils.delete(id)\r\n    ScriptDispatcher.dispatch({ type: ScriptActionTypes.DELETED, id })\r\n  },\r\n\r\n  save (script) {\r\n    if (!script.id) {\r\n      try {\r\n        ScriptUtils.save(script)\r\n        ScriptDispatcher.dispatch({ type: ScriptActionTypes.CREATED, script })\r\n      } catch (e) {\r\n        ScriptDispatcher.dispatch({ type: ScriptActionTypes.CREATE_ERROR, script, error: e })\r\n      }\r\n    } else {\r\n      try {\r\n        ScriptUtils.save(script)\r\n        ScriptDispatcher.dispatch({ type: ScriptActionTypes.UPDATED, script })\r\n      } catch (e) {\r\n        ScriptDispatcher.dispatch({ type: ScriptActionTypes.UPDATE_ERROR, script, error: e })\r\n      }\r\n    }\r\n  },\r\n\r\n  new () {\r\n    ScriptDispatcher.dispatch({ type: ScriptActionTypes.NEW })\r\n  },\r\n\r\n  edit (id) {\r\n    ScriptDispatcher.dispatch({ type: ScriptActionTypes.EDIT, id })\r\n  },\r\n\r\n  cancel () {\r\n    ScriptDispatcher.dispatch({ type: ScriptActionTypes.CANCEL })\r\n  },\r\n\r\n  select (id) {\r\n    ScriptDispatcher.dispatch({ type: ScriptActionTypes.SELECT, id })\r\n  },\r\n\r\n  deselect () {\r\n    ScriptDispatcher.dispatch({ type: ScriptActionTypes.DESELECT })\r\n  },\r\n\r\n  run (settings) {\r\n    Actions.save(settings.script)\r\n    ScriptDispatcher.dispatch({ type: ScriptActionTypes.SIMULATE, settings });\r\n    ScriptUtils\r\n      .run(settings)\r\n      .then((results) => {\r\n        ScriptDispatcher.dispatch({ type: ScriptActionTypes.SIMULATED, results })\r\n      })\r\n  }\r\n};\r\n\r\nexport default Actions;\r\n","import AppView from '../views/AppView';\r\nimport {Container} from 'flux/utils';\r\nimport ScriptStore from '../data/ScriptStore';\r\nimport ScriptListStore from '../data/ScriptListStore';\r\nimport ScriptActions from '../data/ScriptActions';\r\n\r\nfunction getStores() {\r\n  return [\r\n    ScriptStore,\r\n    ScriptListStore\r\n  ];\r\n}\r\n\r\nfunction getState() {\r\n  let items = ScriptStore.getState()\r\n  let list = ScriptListStore.getState()\r\n  return {\r\n    scripts: {\r\n      ...{\r\n        items: items,\r\n        creating: list.get('creating'),\r\n        editing: items.get(list.get('editingId')),\r\n        deleting: items.get(list.get('deletingId')),\r\n        selected: items.get(list.get('selectedId')),\r\n        isLoading: list.get('isSimulating'),\r\n        results: list.get('results'),\r\n        createError: list.get('createError'),\r\n        updateError: list.get('updateError'),\r\n        deleteError: list.get('deleteError')\r\n      },\r\n      ...{\r\n        load: ScriptActions.load,\r\n        onNew: ScriptActions.new,\r\n        onEdit: ScriptActions.edit,\r\n        onCancel: ScriptActions.cancel,\r\n        onSave: ScriptActions.save,\r\n        onDelete: ScriptActions.delete,\r\n        onDeleted: ScriptActions.deleted,\r\n        onSelect: ScriptActions.select,\r\n        onDeselect: ScriptActions.deselect,\r\n        onRun: ScriptActions.run,\r\n      }\r\n    },\r\n  };\r\n}\r\n\r\nexport default Container.createFunctional(AppView, getStores, getState);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport AppContainer from './containers/AppContainer';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<AppContainer />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import ScriptConstants from './ScriptConstants'\r\nimport simulate from './simulate'\r\nimport CryptoJS from \"crypto-js\"\r\n/*\r\n Helper functions\r\n*/\r\n\r\nfunction getLocalStorageScripts() {\r\n  try {\r\n    var loadedScripts = JSON.parse(localStorage.getItem('scripts'))\r\n  } catch (e) {\r\n    loadedScripts = null;\r\n  }\r\n  return loadedScripts;\r\n}\r\n\r\nfunction setLocalStorageScripts(scripts) {\r\n  if (scripts === undefined ||\r\n    scripts === null ||\r\n    (scripts.constructor === Object && Object.keys(scripts).length === 0)) {\r\n    localStorage.removeItem('scripts')\r\n  } else {\r\n    localStorage.setItem('scripts', JSON.stringify(scripts))\r\n  }\r\n}\r\n\r\nfunction onBeforeSave(script) {\r\n  let oldConfig = script.config;\r\n  script.config = getConfigFromScriptText(script)\r\n  assignConfigValues(script.config, oldConfig)\r\n}\r\n\r\nfunction assignConfigValues(config, values) {\r\n  if (!config || config.constructor !== Object) {\r\n    throw new TypeError('config should be an object')\r\n  }\r\n  if (values && values.constructor !== Object) {\r\n    throw new TypeError('values should be undefined or an object')\r\n  }\r\n  if (!values) return config;\r\n  for (const key in values) {\r\n    if (!values[key] || values[key].constructor !== Object) continue;\r\n    if (!config[key]) continue;\r\n    if (values[key].value === undefined) continue;\r\n    config[key].value = values[key].value\r\n    if (config[key].type === 'radio') {\r\n      config[key].options = assignConfigValues(config[key].options || {}, values[key].options)\r\n    }\r\n  }\r\n  return config\r\n}\r\n\r\n/**\r\n * There should be a <code>var config = ...</code> at the top of the script.\r\n * This function will extract that variable from the script and return it as an object,\r\n * together with the remaining script text.\r\n * @param {string} script.text The script's actual raw text\r\n * @returns {Array} The config and the remaining script text.\r\n */\r\nfunction splitConfigFromScriptText(script) {\r\n  const regexp = /^\\s*(var config = {(?:.|\\s)*?^};?)((?:.|\\s)*)$/gm\r\n  const match = regexp.exec(String(script.text).trim())\r\n\r\n  if (match === null) {\r\n    throw new TypeError('The script should begin with: \\r\\nvar config = {\\r\\n  ...\\r\\n}\\r\\n')\r\n  }\r\n  // eslint-disable-next-line\r\n  const config = eval(match[1] + '\\r\\nconfig;')\r\n  return [config, match[2]]\r\n}\r\n\r\nfunction getConfigFromScriptText(script) {\r\n  return splitConfigFromScriptText(script)[0]\r\n}\r\n\r\nfunction getScriptTextWithoutConfig(script) {\r\n  return splitConfigFromScriptText(script)[1]\r\n}\r\n\r\nfunction getUniqueID(existingIds) {\r\n  for (let attempt = 0; attempt < 3; attempt++) {\r\n    let id = String(CryptoJS.lib.WordArray.random(16))\r\n    if (!existingIds || existingIds.indexOf(id) === -1) {\r\n      return id\r\n    }\r\n  }\r\n}\r\n\r\nconst ScriptUtils = {\r\n  /**\r\n   * Load scripts from localStorage.\r\n   * Will insert sample scripts if there are no scripts yet.\r\n   * @returns {Object.<string, Object>} all scripts\r\n   */\r\n  load() {\r\n    let scripts = getLocalStorageScripts()\r\n    if (scripts === null || scripts === undefined) {\r\n      scripts = ScriptUtils.restoreSamples()\r\n    }\r\n    return scripts\r\n  },\r\n\r\n  /**\r\n   * Insert or re-insert sample scripts into localStorage.\r\n   * @returns {Object.<string, Object>} all scripts\r\n   */\r\n  restoreSamples() {\r\n    let scripts = getLocalStorageScripts() || {}\r\n    Object.keys(scripts).forEach(id => {\r\n      if (scripts[id].isSample) {\r\n        delete scripts[id]\r\n      }\r\n    })\r\n    ScriptConstants.SCRIPT_SAMPLES.forEach((script) => {\r\n      onBeforeSave(script)\r\n      script.isSample = true\r\n      script.id = getUniqueID(Object.keys(scripts))\r\n      scripts[script.id] = script\r\n    })\r\n    setLocalStorageScripts(scripts)\r\n\r\n    return scripts\r\n  },\r\n\r\n  /**\r\n   * Save a script.\r\n   * @param {Object.<string, Object>} script The script to save\r\n   */\r\n  save(script) {\r\n    let scripts = getLocalStorageScripts()\r\n    onBeforeSave(script)\r\n    if (!script.id) {\r\n      script.id = getUniqueID(Object.keys(scripts))\r\n    }\r\n    scripts[script.id] = script\r\n    setLocalStorageScripts(scripts)\r\n  },\r\n\r\n  /**\r\n   * Delete a script.\r\n   * @param {string} id The id of script to delete\r\n   */\r\n  delete(id) {\r\n    let scripts = getLocalStorageScripts()\r\n    delete scripts[id]\r\n    setLocalStorageScripts(scripts)\r\n  },\r\n\r\n  /**\r\n   * Simulate a script on a number of games based on a previous bustabit game's hash.\r\n   * @param options The simulation options\r\n   * @param {Object} options.script The script with it's text and config attributes.\r\n   * @param {string} options.gameHash Some previous bustabit game's hash.\r\n   * @param {number} options.gameAmount The amount of games to simulate\r\n   * @param {number} options.startingBalance The amount of Bits to start with.\r\n   * @param {boolean} options.drawChart Whether to collect extra data that is required for a line chart.\r\n   * @param {boolean} options.quickTest Disables the script logging in order to speed up large tests.\r\n   */\r\n  run({ script, gameHash, gameAmount, startingBalance, drawChart, quickTest }) {\r\n    let settings = { ...arguments[0] }\r\n    delete settings.script\r\n    settings.config = script.config\r\n    settings.text = getScriptTextWithoutConfig(script)\r\n\r\n    return {\r\n      then: function (callback) {\r\n        setTimeout(function () {\r\n          simulate(settings)\r\n            .then((results) => {\r\n              callback(results);\r\n            })\r\n            .catch(error => {\r\n              console.error(error)\r\n              let results = { error: error }\r\n              callback(results)\r\n            })\r\n        }, 100)\r\n      }\r\n    }\r\n  },\r\n\r\n}\r\n\r\nexport default ScriptUtils\r\n"],"sourceRoot":""}